<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>Scrollytelling Demo</title>
   	<script src="https://d3js.org/d3.v4.min.js"></script>
   	<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,500" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.5/ScrollMagic.min.js"></script>
    <style>

	</style>
</head>
<body>
  <main role="main" class="container" >
     <div class="row">
     	<div class="col-6">
     		<br><br>
     		<h1>Scrollytelling Demo</h1>
     		<hr>
     	</div>
     </div>
     <div class="row">
  		<div class="col-4">
        <p>NYC Traffic</p>
        <br>
        <p id="description1">This is normal NYC traffic on a weekday</p>
      </div>
      <div class="col-8">
        <div id="trafficMapDiv"></div>
      </div>
      <div class="col-4">
        <p>Before station</p>
        <br>
        <p>Traffic at an intersection</p>
        <br>
        <p id="description2">This is the traffic before a bike sharing station was added.</p>
        <p>Let's see what happens after we add a station.</p>
      </div>
      <div class="col-8">
        <div id="stationBeforeDiv"></div>
      </div>
      <div class="col-4">
        <p>After station</p>
        <br>
        <p>Traffic at an intersection</p>
        <br>
        <p id="description3">This is the traffic after a bike sharing station was added.</p>
        <p>There is now less car traffic!</p>
      </div>
      <div class="col-8">
        <div id="stationAfterDiv">
          <img src="nyc_map.png"/>
        </div>
      </div>
     </div>
  </main>
</body>

<script type="text/javascript">

var svg = d3.select("div#trafficMapDiv")
						.append("svg")
						.attr("viewBox", "0 0 1200 800")
  						.attr("preserveAspectRatio", "xMinYMid")

var rectangles = [[200, 0, 800, 600, "gray"],[260, 50, 200, 500, "lightgray"],[500, 50, 430, 500, "lightgray"]];

svg.selectAll("rect")
   .data(rectangles)
   .enter()
   .append("rect")
   .attr("stroke", "black")
   .attr("stroke-width", 1)
   .attr("x", function(d) {
   		return d[0];})
   .attr("y", function(d) {
   		return d[1];})
   .attr("width", function(d) {
   		return d[2];})
   .attr("height", function(d) {
   		return d[3];})
   .attr("fill", function(d) {
   		if (d[4]== "gray")
   			return "gray";
   		else
   			return "#bdbdbd";})


    svg.append("text")
		.attr("x", 360)
		.attr("y", 150)
		.attr("text-anchor", "middle")
		.text("text column")
		.attr("class", "text1opacity")

		svg.append("text")
		.attr("x", 360)
		.attr("y", 200)
		.attr("text-anchor", "middle")
		.text("class='col-4'")
		.attr("class", "text1opacity")

		svg.append("text")
		.attr("x", 710)
		.attr("y", 150)
		.attr("text-anchor", "middle")
		.text("visuals column")
		.attr("class", "text2opacity")

	svg.append("text")
		.attr("x", 710)
		.attr("y", 200)
		.attr("text-anchor", "middle")
		.text("class='col-8'")
		.attr("class", "text2opacity")


var svg = d3.select("div#stationBeforeDiv")
						.append("svg")
						.attr("viewBox", "0 0 1200 800")
  						.attr("preserveAspectRatio", "xMinYMid")

var rectangles = [[200, 00, 800, 750, "gray"],[260, 50, 200, 80, "lightgray"],[260, 150, 200, 80, "lightgray"],[260, 250, 200, 80, "lightgray"],[260, 350, 200, 80, "lightgray"],[260, 450, 200, 80, "lightgray"],[260, 550, 200, 80, "lightgray"],[260, 650, 200, 80, "lightgray"],[500, 50, 430, 350, "lightgray"],[500, 450, 430, 280, "lightgray"]];

svg.selectAll("rect")
   .data(rectangles)
   .enter()
   .append("rect")
   .attr("stroke", "black")
   .attr("stroke-width", 1)
   .attr("x", function(d) {
   		return d[0];})
   .attr("y", function(d) {
   		return d[1];})
   .attr("width", function(d) {
   		return d[2];})
   .attr("height", function(d) {
   		return d[3];})
   .attr("fill", function(d) {
   		if (d[4]== "gray")
   			return "gray";
   		else
   			return "#bdbdbd";})

svg.append("text")
		.attr("x", 350)
		.attr("y", 100)
		.attr("text-anchor", "middle")
		.text("ID='description1'")
		.attr("class", "text3opacity")

	svg.append("text")
		.attr("x", 350)
		.attr("y", 200)
		.attr("text-anchor", "middle")
		.text("ID='description2'")
		.attr("class", "text3opacity")

	svg.append("text")
		.attr("x", 350)
		.attr("y", 300)
		.attr("text-anchor", "middle")
		.text("ID='description3'")
		.attr("class", "text3opacity")

	// svg.append("text")
	// 	.attr("x", 350)
	// 	.attr("y", 400)
	// 	.attr("text-anchor", "middle")
	// 	.text("ID='text4'")
	// 	.attr("class", "text3opacity")
  //
	// svg.append("text")
	// 	.attr("x", 350)
	// 	.attr("y", 500)
	// 	.attr("text-anchor", "middle")
	// 	.text("ID='text5'")
	// 	.attr("class", "text3opacity")
  //
	// svg.append("text")
	// 	.attr("x", 350)
	// 	.attr("y", 600)
	// 	.attr("text-anchor", "middle")
	// 	.text("ID='text6'")
	// 	.attr("class", "text3opacity")
// <!--
// 	svg.append("text")
// 		.attr("x", 350)
// 		.attr("y", 700)
// 		.attr("text-anchor", "middle")
// 		.text("ID='text7'")
// 		.attr("class", "text3opacity") -->

	svg.append("text")
		.attr("x", 700)
		.attr("y", 200)
		.attr("text-anchor", "middle")
		.text("ID='trafficMapDiv'")
		.attr("class", "text3opacity")

	svg.append("text")
		.attr("x", 700)
		.attr("y", 580)
		.attr("text-anchor", "middle")
		.text("ID='stationBeforeDiv'")
		.attr("class", "text3opacity")


	svg.append("text")
		.attr("x", 700)
		.attr("y", 250)
		.attr("text-anchor", "middle")
		.text("position: sticky")
		.attr("class", "text3opacity")

  svg.append("text")
		.attr("x", 700)
		.attr("y", 630)
		.attr("text-anchor", "middle")
		.text("position: sticky")
		.attr("class", "text3opacity")


  var controller = new ScrollMagic.Controller();

  new ScrollMagic.Scene({triggerElement: "#description1"})
      .setClassToggle(".text1opacity", "active")
      .addTo(controller);

  new ScrollMagic.Scene({triggerElement: "#description2"})
      .setClassToggle(".text2opacity", "active")
      .addTo(controller);

  new ScrollMagic.Scene({triggerElement: "#description3"})
      .setClassToggle(".text3opacity", "active")
      .addTo(controller);

</script>
</html>
